@{
    ViewData["Title"] = "Tiếp nhận hồ sơ";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!-- Link CSS -->
<link rel="stylesheet" href="~/css/ReceiveProfile/ReceiveProfile.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">

<!-- Main Wrapper -->
<div class="receive-profile-wrapper">

    <!-- LEFT SIDEBAR - SEARCH -->
    <aside class="sidebar-search">
        <div class="sidebar-header">
            <h3><i class="bi bi-search"></i> Tìm kiếm hồ sơ</h3>
            <p>Tra cứu thông tin chủ xe và phương tiện</p>
        </div>

        <!-- Search by CCCD -->
        <div class="search-section">
            <label class="search-label">
                <i class="bi bi-credit-card-2-front"></i> CCCD/CMND
            </label>
            <input type="text"
                   id="search-cccd"
                   class="search-input"
                   placeholder="Nhập số CCCD/CMND"
                   maxlength="12">
        </div>

        <!-- Search by Plate Number -->
        <div class="search-section">
            <label class="search-label">
                <i class="bi bi-car-front-fill"></i> Biển số xe
            </label>
            <input type="text"
                   id="search-plate"
                   class="search-input"
                   placeholder="VD: 51A-12345">
        </div>

        <!-- Search Buttons -->
        <button type="button" class="btn-search" onclick="searchProfile()">
            <i class="bi bi-search"></i>
            Tìm kiếm
        </button>

        <button type="button" class="btn-clear" onclick="clearSearch()">
            <i class="bi bi-x-circle"></i> Xóa
        </button>

        <!-- Recent Searches -->
        <div class="recent-searches">
            <h4><i class="bi bi-clock-history"></i> Tìm kiếm gần đây</h4>
            <div id="recent-list">
                <!-- Dynamic content -->
            </div>
        </div>
    </aside>

    <!-- RIGHT MAIN CONTENT -->
    <main class="main-content">

        <!-- Page Header -->
        <div class="page-header">
            <div style="flex: 1;">
                <h1><i class="bi bi-file-earmark-text"></i> Tiếp nhận hồ sơ đăng kiểm</h1>
                <p>Quản lý thông tin chủ xe và phương tiện đăng kiểm</p>
            </div>
            <!-- Nút Tạo mới ở góc phải header -->
            <button type="button" class="btn-create-new" onclick="createNewProfile()">
                <i class="bi bi-plus-circle"></i> Tạo mới
            </button>
        </div>

        <!-- Breadcrumb -->
        <nav class="breadcrumb-custom">
            <a href="/"><i class="bi bi-house-door"></i> Trang chủ</a> /
            <span>Tiếp nhận hồ sơ</span>
        </nav>

        <!-- Content Area -->
        <div id="content-area">

            <!-- NO DATA STATE (Default) -->
            <div class="no-data-state" id="no-data-state">
                <div class="no-data-icon">
                    <i class="bi bi-inbox"></i>
                </div>
                <h3>Chưa có dữ liệu</h3>
                <p>Vui lòng tìm kiếm theo CCCD hoặc Biển số xe để xem thông tin</p>
            </div>

            <!-- LOADING STATE -->
            <div class="loading-state" id="loading-state" style="display: none;">
                <div class="spinner"></div>
                <p class="loading-text">Đang tải dữ liệu...</p>
            </div>

            <!-- DATA DISPLAY -->
            <div id="data-display" style="display: none;">

                <!-- SECTION 1: OWNER INFO -->
                <div class="owner-info-card">
                    <div class="owner-card-header">
                        <i class="bi bi-person-circle"></i>
                        <h2>Thông tin chủ xe</h2>
                    </div>
                    <div class="owner-card-body">
                        <div class="owner-profile-section">
                            <!-- Owner Image -->
                            <div class="owner-image-wrapper">
                                <div id="owner-image-container">
                                    <div class="image-placeholder">
                                        <i class="bi bi-person"></i>
                                        <span>HÌNH 3X4</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Owner Details - ALL READONLY -->
                            <div class="owner-details">
                                <input type="hidden" id="owner-id" />

                                <div class="detail-row">
                                    <div class="detail-item">
                                        <span class="detail-label">Loại chủ xe</span>
                                        <input type="text" id="owner-type" class="detail-input" readonly>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label">Họ và tên</span>
                                        <input type="text" id="owner-fullname" class="detail-input" readonly>
                                    </div>
                                </div>

                                <div class="detail-row" id="person-info">
                                    <div class="detail-item">
                                        <span class="detail-label">CCCD/CMND</span>
                                        <input type="text" id="owner-cccd" class="detail-input" readonly>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label">Số điện thoại</span>
                                        <input type="text" id="owner-phone" class="detail-input" readonly>
                                    </div>
                                </div>

                                <div class="detail-row" id="company-info" style="display: none;">
                                    <div class="detail-item">
                                        <span class="detail-label">Tên công ty</span>
                                        <input type="text" id="owner-company" class="detail-input" readonly>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label">Mã số thuế</span>
                                        <input type="text" id="owner-taxcode" class="detail-input" readonly>
                                    </div>
                                </div>

                                <div class="detail-row">
                                    <div class="detail-item">
                                        <span class="detail-label">Email</span>
                                        <input type="email" id="owner-email" class="detail-input" readonly>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label">Số điện thoại</span>
                                        <input type="text" id="owner-phone2" class="detail-input" readonly>
                                    </div>
                                </div>

                                <div class="detail-row">
                                    <div class="detail-item">
                                        <span class="detail-label">Địa chỉ</span>
                                        <input type="text" id="owner-address" class="detail-input" readonly>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label">Tỉnh/Thành phố</span>
                                        <input type="text" id="owner-province" class="detail-input" readonly>
                                    </div>
                                </div>

                                <div class="detail-row">
                                    <div class="detail-item">
                                        <span class="detail-label">Phường/Xã</span>
                                        <input type="text" id="owner-ward" class="detail-input" readonly>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label">Ngày tạo</span>
                                        <input type="text" id="owner-created" class="detail-input" readonly>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SECTION 2: VEHICLE INFO - ALL READONLY -->
                <div class="vehicle-info-card">
                    <div class="vehicle-card-header">
                        <i class="bi bi-car-front"></i>
                        <h2>Thông tin phương tiện</h2>
                    </div>
                    <div class="vehicle-card-body">
                        <input type="hidden" id="vehicle-id" />

                        <div class="vehicle-grid">
                            <div class="vehicle-item">
                                <div class="vehicle-item-label"><i class="bi bi-card-heading"></i> Biển số xe</div>
                                <input type="text" id="vehicle-plate" class="vehicle-input" readonly>
                            </div>
                            <div class="vehicle-item">
                                <div class="vehicle-item-label"><i class="bi bi-file-text"></i> Số quản lý</div>
                                <input type="text" id="vehicle-inspection" class="vehicle-input" readonly>
                            </div>
                            <div class="vehicle-item">
                                <div class="vehicle-item-label"><i class="bi bi-collection"></i> Nhóm phương tiện</div>
                                <input type="text" id="vehicle-group" class="vehicle-input" readonly>
                            </div>

                            <div class="vehicle-item">
                                <div class="vehicle-item-label"><i class="bi bi-tag"></i> Loại phương tiện</div>
                                <select id="vehicle-type" class="vehicle-input form-select" readonly>
                                    <option value="">-- Chọn loại phương tiện --</option>

                                </select>
                            </div>
                            <div class="vehicle-item">
                                <div class="vehicle-item-label"><i class="bi bi-award"></i> Nhãn hiệu</div>
                                <input type="text" id="vehicle-brand" class="vehicle-input" readonly>
                            </div>
                            <div class="vehicle-item">
                                <div class="vehicle-item-label"><i class="bi bi-box"></i> Mã kiểu loại</div>
                                <input type="text" id="vehicle-model" class="vehicle-input" readonly>
                            </div>

                            <div class="vehicle-item">
                                <div class="vehicle-item-label"><i class="bi bi-gear"></i> Số động cơ</div>
                                <input type="text" id="vehicle-engine" class="vehicle-input" readonly>
                            </div>
                            <div class="vehicle-item">
                                <div class="vehicle-item-label"><i class="bi bi-hash"></i> Số khung</div>
                                <input type="text" id="vehicle-chassis" class="vehicle-input" readonly>
                            </div>
                            <div class="vehicle-item">
                                <div class="vehicle-item-label"><i class="bi bi-calendar"></i> Năm sản xuất</div>
                                <input type="number" id="vehicle-year" class="vehicle-input" readonly>
                            </div>

                            <div class="vehicle-item">
                                <div class="vehicle-item-label"><i class="bi bi-globe"></i> Nước sản xuất</div>
                                <input type="text" id="vehicle-country" class="vehicle-input" readonly>
                            </div>
                            <div class="vehicle-item">
                                <div class="vehicle-item-label"><i class="bi bi-lightning-charge"></i> Loại năng lượng</div>
                                <input type="text" id="vehicle-energy" class="vehicle-input" readonly>
                            </div>
                            <div class="vehicle-item">
                                <div class="vehicle-item-label"><i class="bi bi-leaf"></i> Năng lượng sạch</div>
                                <input type="checkbox" id="vehicle-clean" disabled>
                            </div>

                            <div class="vehicle-item">
                                <div class="vehicle-item-label"><i class="bi bi-robot"></i> Quyền sử dụng</div>
                                <input type="text" id="vehicle-usage" class="vehicle-input" readonly>
                            </div>
                            <div class="vehicle-item">
                                <div class="vehicle-item-label"><i class="bi bi-hourglass"></i> Niên hạn sử dụng (năm)</div>
                                <input type="number" id="vehicle-lifetime" class="vehicle-input" readonly>
                            </div>
                            <div class="vehicle-item">
                                <div class="vehicle-item-label"><i class="bi bi-tools"></i> Có cải tạo</div>
                                <input type="checkbox" id="vehicle-modification" disabled>
                            </div>

                            <div class="vehicle-item">
                                <div class="vehicle-item-label"><i class="bi bi-truck"></i> Kinh doanh vận tải</div>
                                <input type="checkbox" id="vehicle-commercial" disabled>
                            </div>
                            <div class="vehicle-item">
                                <div class="vehicle-item-label"><i class="bi bi-clock"></i> Ngày tạo</div>
                                <input type="text" id="vehicle-created" class="vehicle-input" readonly>
                            </div>
                            <div class="vehicle-item">
                                <div class="vehicle-item-label"><i class="bi bi-clock-history"></i> Cập nhật</div>
                                <input type="text" id="vehicle-updated" class="vehicle-input" readonly>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SECTION 3: SPECIFICATION INFO - ALL READONLY -->
                <div class="vehicle-info-card">
                    <div class="vehicle-card-header">
                        <i class="bi bi-clipboard-data"></i>
                        <h2>Thông số kỹ thuật</h2>
                    </div>
                    <div class="vehicle-card-body">
                        <input type="hidden" id="spec-id" />

                        <h4 class="spec-section-title"><i class="bi bi-rulers"></i> Kích thước</h4>
                        <div class="vehicle-grid">
                            <div class="vehicle-item">
                                <div class="vehicle-item-label">Công thức bánh xe</div>
                                <input type="text" id="spec-wheel-formula" class="vehicle-input" readonly>
                            </div>
                            <div class="vehicle-item">
                                <div class="vehicle-item-label">Vết bánh xe (mm)</div>
                                <input type="number" id="spec-wheel-tread" class="vehicle-input" readonly>
                            </div>
                            <div class="vehicle-item">
                                <div class="vehicle-item-label">Khoảng cách trục (mm)</div>
                                <input type="number" id="spec-wheelbase" class="vehicle-input" readonly>
                            </div>

                            <div class="vehicle-item">
                                <div class="vehicle-item-label">Chiều dài (mm)</div>
                                <input type="number" id="spec-length" class="vehicle-input" readonly>
                            </div>
                            <div class="vehicle-item">
                                <div class="vehicle-item-label">Chiều rộng (mm)</div>
                                <input type="number" id="spec-width" class="vehicle-input" readonly>
                            </div>
                            <div class="vehicle-item">
                                <div class="vehicle-item-label">Chiều cao (mm)</div>
                                <input type="number" id="spec-height" class="vehicle-input" readonly>
                            </div>
                        </div>

                        <h4 class="spec-section-title"><i class="bi bi-box-seam"></i> Kích thước thùng hàng</h4>
                        <div class="vehicle-grid">
                            <div class="vehicle-item">
                                <div class="vehicle-item-label">Dài thùng (mm)</div>
                                <input type="number" id="spec-cargo-length" class="vehicle-input" readonly>
                            </div>
                            <div class="vehicle-item">
                                <div class="vehicle-item-label">Rộng thùng (mm)</div>
                                <input type="number" id="spec-cargo-width" class="vehicle-input" readonly>
                            </div>
                            <div class="vehicle-item">
                                <div class="vehicle-item-label">Cao thùng (mm)</div>
                                <input type="number" id="spec-cargo-height" class="vehicle-input" readonly>
                            </div>
                        </div>

                        <h4 class="spec-section-title"><i class="bi bi-speedometer"></i> Khối lượng</h4>
                        <div class="vehicle-grid">
                            <div class="vehicle-item">
                                <div class="vehicle-item-label">Khối lượng bản thân (kg)</div>
                                <input type="number" id="spec-kerb-weight" class="vehicle-input" readonly>
                            </div>
                            <div class="vehicle-item">
                                <div class="vehicle-item-label">Khối lượng hàng CC (kg)</div>
                                <input type="number" id="spec-cargo-weight" class="vehicle-input" readonly>
                            </div>
                            <div class="vehicle-item">
                                <div class="vehicle-item-label">Khối lượng kéo theo (kg)</div>
                                <input type="number" id="spec-towed-weight" class="vehicle-input" readonly>
                            </div>
                            <div class="vehicle-item">
                                <div class="vehicle-item-label">Khối lượng toàn bộ (kg)</div>
                                <input type="number" id="spec-total-weight" class="vehicle-input" readonly>
                            </div>
                        </div>

                        <h4 class="spec-section-title"><i class="bi bi-people"></i> Số người cho phép chở</h4>
                        <div class="vehicle-grid">
                            <div class="vehicle-item">
                                <div class="vehicle-item-label">Chở ngồi</div>
                                <input type="number" id="spec-seating" class="vehicle-input" readonly>
                            </div>
                            <div class="vehicle-item">
                                <div class="vehicle-item-label">Chở đứng</div>
                                <input type="number" id="spec-standing" class="vehicle-input" readonly>
                            </div>
                            <div class="vehicle-item">
                                <div class="vehicle-item-label">Chở nằm</div>
                                <input type="number" id="spec-lying" class="vehicle-input" readonly>
                            </div>
                        </div>

                        <h4 class="spec-section-title"><i class="bi bi-gear-fill"></i> Động cơ</h4>
                        <div class="vehicle-grid">
                            <div class="vehicle-item">
                                <div class="vehicle-item-label">Loại động cơ</div>
                                <input type="text" id="spec-engine-type" class="vehicle-input" readonly>
                            </div>
                            <div class="vehicle-item">
                                <div class="vehicle-item-label">Vị trí động cơ</div>
                                <input type="text" id="spec-engine-position" class="vehicle-input" readonly>
                            </div>
                            <div class="vehicle-item">
                                <div class="vehicle-item-label">Ký hiệu động cơ</div>
                                <input type="text" id="spec-engine-model" class="vehicle-input" readonly>
                            </div>

                            <div class="vehicle-item">
                                <div class="vehicle-item-label">Thể tích (cm³)</div>
                                <input type="number" id="spec-displacement" class="vehicle-input" readonly>
                            </div>
                            <div class="vehicle-item">
                                <div class="vehicle-item-label">Công suất max (kW)</div>
                                <input type="number" id="spec-max-power" class="vehicle-input" readonly>
                            </div>
                            <div class="vehicle-item">
                                <div class="vehicle-item-label">Tốc độ tại max (rpm)</div>
                                <input type="number" id="spec-max-rpm" class="vehicle-input" readonly>
                            </div>

                            <div class="vehicle-item">
                                <div class="vehicle-item-label">Loại nhiên liệu</div>
                                <input type="text" id="spec-fuel-type" class="vehicle-input" readonly>
                            </div>
                        </div>

                        <h4 class="spec-section-title"><i class="bi bi-lightning-charge-fill"></i> Động cơ điện</h4>
                        <div class="vehicle-grid">
                            <div class="vehicle-item">
                                <div class="vehicle-item-label">Loại động cơ điện</div>
                                <input type="text" id="spec-motor-type" class="vehicle-input" readonly>
                            </div>
                            <div class="vehicle-item">
                                <div class="vehicle-item-label">Số lượng động cơ</div>
                                <input type="number" id="spec-motor-count" class="vehicle-input" readonly>
                            </div>
                            <div class="vehicle-item">
                                <div class="vehicle-item-label">Ký hiệu động cơ điện</div>
                                <input type="text" id="spec-motor-model" class="vehicle-input" readonly>
                            </div>

                            <div class="vehicle-item">
                                <div class="vehicle-item-label">Tổng công suất (kW)</div>
                                <input type="number" id="spec-motor-power" class="vehicle-input" readonly>
                            </div>
                            <div class="vehicle-item">
                                <div class="vehicle-item-label">Điện áp (V)</div>
                                <input type="number" id="spec-motor-voltage" class="vehicle-input" readonly>
                            </div>
                        </div>

                        <h4 class="spec-section-title"><i class="bi bi-battery-charging"></i> Ắc quy</h4>
                        <div class="vehicle-grid">
                            <div class="vehicle-item">
                                <div class="vehicle-item-label">Loại ắc quy</div>
                                <input type="text" id="spec-battery-type" class="vehicle-input" readonly>
                            </div>
                            <div class="vehicle-item">
                                <div class="vehicle-item-label">Điện áp (V)</div>
                                <input type="number" id="spec-battery-voltage" class="vehicle-input" readonly>
                            </div>
                            <div class="vehicle-item">
                                <div class="vehicle-item-label">Dung lượng (kWh)</div>
                                <input type="number" id="spec-battery-capacity" class="vehicle-input" readonly>
                            </div>
                        </div>

                        <h4 class="spec-section-title"><i class="bi bi-circle"></i> Lốp xe</h4>
                        <div class="vehicle-grid">
                            <div class="vehicle-item">
                                <div class="vehicle-item-label">Số lượng lốp</div>
                                <input type="number" id="spec-tire-count" class="vehicle-input" readonly>
                            </div>
                            <div class="vehicle-item">
                                <div class="vehicle-item-label">Cỡ lốp</div>
                                <input type="text" id="spec-tire-size" class="vehicle-input" readonly>
                            </div>
                            <div class="vehicle-item">
                                <div class="vehicle-item-label">Thông tin trục</div>
                                <input type="text" id="spec-tire-axle" class="vehicle-input" readonly>
                            </div>
                        </div>

                        <h4 class="spec-section-title"><i class="bi bi-cpu"></i> Trang thiết bị</h4>
                        <div class="vehicle-grid">
                            <div class="vehicle-item">
                                <div class="vehicle-item-label">Vị trí hình ảnh</div>
                                <input type="text" id="spec-image-position" class="vehicle-input" readonly>
                            </div>
                            <div class="vehicle-item">
                                <div class="vehicle-item-label">Giám sát hành trình</div>
                                <input type="checkbox" id="spec-tachograph" disabled>
                            </div>
                            <div class="vehicle-item">
                                <div class="vehicle-item-label">Camera lái xe</div>
                                <input type="checkbox" id="spec-camera" disabled>
                            </div>
                            <div class="vehicle-item">
                                <div class="vehicle-item-label">Không cấp tem</div>
                                <input type="checkbox" id="spec-no-stamp" disabled>
                            </div>
                        </div>

                        <h4 class="spec-section-title"><i class="bi bi-chat-left-text"></i> Ghi chú</h4>
                        <textarea id="spec-notes" class="spec-notes-textarea" rows="4" readonly></textarea>

                    </div>
                </div>

                <!-- Action Buttons - SỬA & XÉT DUYỆT -->
                <div class="action-buttons">
                    <button type="button" class="btn-edit" onclick="editProfile()">
                        <i class="bi bi-pencil-square"></i> Sửa
                    </button>
                    <button type="button" class="btn-approve" onclick="approveProfile()">
                        <i class="bi bi-check-circle"></i> Xét duyệt
                    </button>
                </div>

            </div>
        </div>

    </main>
</div>

<!-- Notification Container -->
<div id="notification-container"></div>

<!-- Link JavaScript -->
<script src="~/js/ReceiveProfile/ReceiveProfile.js"></script>

<style>
    .btn-approve {
        display: inline-flex;
        align-items: center;
        gap: 12px;
        padding: 18px 56px;
        background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%) !important;
        color: white !important;
        border: none;
        border-radius: 14px;
        font-size: 18px;
        font-weight: 700;
        cursor: pointer;
        box-shadow: 0 10px 25px rgba(76, 175, 80, 0.4);
    }

        .btn-approve:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 15px 40px rgba(76, 175, 80, 0.6);
        }
</style>